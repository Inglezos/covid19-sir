

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Usage: scenario analysis &mdash; CovsirPhy  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage: datasets" href="usage_dataset.html" />
    <link rel="prev" title="Usage: quickest tour" href="usage_quickest.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CovsirPhy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">CovsirPhy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="INSTALLATION.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="INSTALLATION.html#dataset-preparation">Dataset preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_quickest.html">Usage: quickest tour</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage: scenario analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Preparation">Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Dataset-preparation">Dataset preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Start-scenario-analysis">Start scenario analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Check-records">Check records</a></li>
<li class="toctree-l2"><a class="reference internal" href="#S-R-trend-analysis">S-R trend analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Hyperparameter-estimation-of-ODE-models">Hyperparameter estimation of ODE models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Accuracy-of-estimation">Accuracy of estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Get-parameter-value">Get parameter value</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Show-parameter-history">Show parameter history</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Show-the-history-of-reproduction-number">Show the history of reproduction number</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Simulate-the-number-of-cases">Simulate the number of cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Main-scenario">Main scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Medicine-scenario">Medicine scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Short-term-prediction-of-parameter-values">Short-term prediction of parameter values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Compare-the-scenarios">Compare the scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Change-rate-of-parameters-in-main-scenario">Change rate of parameters in main scenario</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Retrospective-analysis">Retrospective analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage_dataset.html">Usage: datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_phases.html">Usage: phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_theoretical.html">Usage: SIR-derived models</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_policy.html">Usage: policy measures</a></li>
<li class="toctree-l1"><a class="reference internal" href="covsirphy.html">covsirphy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="TERM.html">Term definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security policy of CovsirPhy</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Guideline of contribution</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CovsirPhy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Usage: scenario analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usage_quick.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Usage:-scenario-analysis">
<h1>Usage: scenario analysis<a class="headerlink" href="#Usage:-scenario-analysis" title="Permalink to this headline">¶</a></h1>
<p>This is a quick tour of CovsirPhy. Details scenario analysis will be explained. “Scenario analysis” means that we calculate the number of cases in the future phases with some sets of ODE parameter values. With this analysis, we can estimate the impact of our activities against the outbreak on the number of cases.</p>
<div class="section" id="Preparation">
<h2>Preparation<a class="headerlink" href="#Preparation" title="Permalink to this headline">¶</a></h2>
<p>Prepare the packages.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Standard users</span>
<span class="c1"># !pip install covsirphy</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Developers (Note: this notebook is in example directory)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;../&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">covsirphy</span> <span class="k">as</span> <span class="nn">cs</span>
<span class="n">cs</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;2.14.0-theta-fu1&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Dataset-preparation">
<h2>Dataset preparation<a class="headerlink" href="#Dataset-preparation" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Download the datasets to “input” direcotry and load them.</div>
<div class="line">Please refer to <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_dataset.html">Usage: datasets</a> for the details.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data_loader</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>
<span class="c1"># The number of cases (JHU style)</span>
<span class="n">jhu_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">jhu</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Population in each country</span>
<span class="n">population_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">population</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Government Response Tracker (OxCGRT)</span>
<span class="n">oxcgrt_data</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">oxcgrt</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieving datasets from COVID-19 Data Hub: https://covid19datahub.io/

Please set verbose=2 to see the detailed citation list.


Retrieving COVID-19 dataset in Japan from https://github.com/lisphilar/covid19-sir/data/japan
</pre></div></div>
</div>
</div>
<div class="section" id="Start-scenario-analysis">
<h2>Start scenario analysis<a class="headerlink" href="#Start-scenario-analysis" title="Permalink to this headline">¶</a></h2>
<p>As an example, we will analysis the number of cases in Japan.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">jhu_data</span><span class="p">,</span> <span class="n">population_data</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="s2">&quot;Japan&quot;</span><span class="p">,</span> <span class="n">province</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># &gt;= version 2.15.0 or the latest development version</span>
<span class="c1"># If you want to stop displaying figures when using interactive shell,</span>
<span class="c1"># snl.interactive = False</span>
<span class="c1"># For temporally, plese use snl.records(show_figure=False) etc.</span>
<span class="c1"># If you want save figures,</span>
<span class="c1"># snl.interactive = False</span>
<span class="c1"># and please use snl.records(filename=&quot;records.jpg&quot;) etc.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Check-records">
<h2>Check records<a class="headerlink" href="#Check-records" title="Permalink to this headline">¶</a></h2>
<p>Let’s see the records at first. <code class="docutils literal notranslate"><span class="pre">Scenario.records()</span></code> method return the records as a pandas dataframe and show a line plot. Some kind of complement will be done for analysis, if necessary.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">record_df</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">records</span><span class="p">()</span>
<span class="n">record_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_11_0.png" src="_images/usage_quick_11_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Infected</th>
      <th>Fatal</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>337</th>
      <td>2021-01-08</td>
      <td>47705</td>
      <td>3857</td>
      <td>213737</td>
    </tr>
    <tr>
      <th>338</th>
      <td>2021-01-09</td>
      <td>51853</td>
      <td>3932</td>
      <td>217369</td>
    </tr>
    <tr>
      <th>339</th>
      <td>2021-01-10</td>
      <td>56243</td>
      <td>3996</td>
      <td>220536</td>
    </tr>
    <tr>
      <th>340</th>
      <td>2021-01-11</td>
      <td>59745</td>
      <td>4044</td>
      <td>222963</td>
    </tr>
    <tr>
      <th>341</th>
      <td>2021-01-12</td>
      <td>62722</td>
      <td>4094</td>
      <td>225396</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can calculate the number of daily new cases with <code class="docutils literal notranslate"><span class="pre">Scenario.record_diff()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">records_diff</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Confirmed&quot;</span><span class="p">],</span> <span class="n">window</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_13_0.png" src="_images/usage_quick_13_0.png" />
</div>
</div>
</div>
<div class="section" id="S-R-trend-analysis">
<h2>S-R trend analysis<a class="headerlink" href="#S-R-trend-analysis" title="Permalink to this headline">¶</a></h2>
<p>S-R trend analysis finds the change points of SIR-derived ODE parameters. Details will be explained in <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_phases.html">Usage (details: phases)</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Perform S-R trend analysis and set phases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">trend</span><span class="p">(</span><span class="n">set_phases</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_15_0.png" src="_images/usage_quick_15_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>22Aug2020</td>
      <td>15Sep2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>16Sep2020</td>
      <td>14Oct2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>15Oct2020</td>
      <td>07Nov2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>08Nov2020</td>
      <td>20Nov2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>21Nov2020</td>
      <td>02Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>03Dec2020</td>
      <td>12Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>13Dec2020</td>
      <td>22Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>23Dec2020</td>
      <td>30Dec2020</td>
      <td>126529100</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>31Dec2020</td>
      <td>12Jan2021</td>
      <td>126529100</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Hyperparameter-estimation-of-ODE-models">
<h2>Hyperparameter estimation of ODE models<a class="headerlink" href="#Hyperparameter-estimation-of-ODE-models" title="Permalink to this headline">¶</a></h2>
<p>Here, we will estimate the parameter values of SIR-derived models. As an example, we use SIR-F model. Details of models will be explained in <a class="reference external" href="https://lisphilar.github.io/covid19-sir/usage_theoretical.html">Usage (details: theoritical datasets)</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Estimate the parameter values of SIR-F model</span>
<span class="n">snl</span><span class="o">.</span><span class="n">estimate</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         0th phase (20Jul2020 - 05Aug2020): finished 3177 trials in 3 min  0 sec
         8th phase (22Aug2020 - 15Sep2020): finished  300 trials in 0 min 10 sec
         1st phase (21Nov2020 - 02Dec2020): finished  318 trials in 0 min 10 sec
         4th phase (08Nov2020 - 20Nov2020): finished  309 trials in 0 min 10 sec
         2nd phase (03Dec2020 - 12Dec2020): finished  764 trials in 0 min 30 sec
        11th phase (13Dec2020 - 22Dec2020): finished  279 trials in 0 min 10 sec
         9th phase (06Feb2020 - 16Apr2020): finished 2663 trials in 3 min  1 sec
         6th phase (06Aug2020 - 21Aug2020): finished 2701 trials in 3 min  1 sec
         7th phase (15Oct2020 - 07Nov2020): finished 2672 trials in 3 min  0 sec
         5th phase (16Sep2020 - 14Oct2020): finished  252 trials in 0 min 10 sec
        10th phase (23Dec2020 - 30Dec2020): finished  473 trials in 0 min 20 sec
         3rd phase (31Dec2020 - 12Jan2021): finished 2684 trials in 3 min  0 sec
        12th phase (17Apr2020 - 19Jul2020): finished 3175 trials in 3 min  0 sec
Completed optimization. Total: 9 min  4 sec
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the sumamry of parameter estimation</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>1/beta [day]</th>
      <th>alpha1 [-]</th>
      <th>1/gamma [day]</th>
      <th>1/alpha2 [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.64</td>
      <td>0.019314</td>
      <td>0.000191</td>
      <td>0.052288</td>
      <td>0.010854</td>
      <td>720</td>
      <td>9</td>
      <td>0.019</td>
      <td>46</td>
      <td>2618</td>
      <td>0.260938</td>
      <td>2663</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.56</td>
      <td>0.071936</td>
      <td>0.000406</td>
      <td>0.016125</td>
      <td>0.026429</td>
      <td>720</td>
      <td>31</td>
      <td>0.072</td>
      <td>18</td>
      <td>1231</td>
      <td>0.389551</td>
      <td>3175</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.85</td>
      <td>0.000391</td>
      <td>0.000074</td>
      <td>0.068940</td>
      <td>0.037153</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>13</td>
      <td>6724</td>
      <td>0.021047</td>
      <td>3177</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000483</td>
      <td>0.000257</td>
      <td>0.047723</td>
      <td>0.044728</td>
      <td>720</td>
      <td>10</td>
      <td>0.000</td>
      <td>11</td>
      <td>1948</td>
      <td>0.039673</td>
      <td>2701</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>22Aug2020</td>
      <td>15Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.68</td>
      <td>0.000350</td>
      <td>0.000710</td>
      <td>0.033912</td>
      <td>0.049114</td>
      <td>720</td>
      <td>14</td>
      <td>0.000</td>
      <td>10</td>
      <td>704</td>
      <td>0.052936</td>
      <td>300</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>16Sep2020</td>
      <td>14Oct2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.90</td>
      <td>0.001151</td>
      <td>0.000531</td>
      <td>0.043952</td>
      <td>0.048301</td>
      <td>720</td>
      <td>11</td>
      <td>0.001</td>
      <td>10</td>
      <td>941</td>
      <td>0.027704</td>
      <td>252</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>15Oct2020</td>
      <td>07Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.000070</td>
      <td>0.000570</td>
      <td>0.052594</td>
      <td>0.046326</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>10</td>
      <td>877</td>
      <td>0.033175</td>
      <td>2672</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>08Nov2020</td>
      <td>20Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.59</td>
      <td>0.000468</td>
      <td>0.000551</td>
      <td>0.071139</td>
      <td>0.044182</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>11</td>
      <td>906</td>
      <td>0.012079</td>
      <td>309</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>21Nov2020</td>
      <td>02Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.37</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.053229</td>
      <td>0.038421</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>13</td>
      <td>906</td>
      <td>0.027197</td>
      <td>318</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>03Dec2020</td>
      <td>12Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.15</td>
      <td>0.001707</td>
      <td>0.000689</td>
      <td>0.051601</td>
      <td>0.044288</td>
      <td>720</td>
      <td>9</td>
      <td>0.002</td>
      <td>11</td>
      <td>725</td>
      <td>0.006455</td>
      <td>764</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>13Dec2020</td>
      <td>22Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.001168</td>
      <td>0.000797</td>
      <td>0.048470</td>
      <td>0.042434</td>
      <td>720</td>
      <td>10</td>
      <td>0.001</td>
      <td>11</td>
      <td>627</td>
      <td>0.008264</td>
      <td>279</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>23Dec2020</td>
      <td>30Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.36</td>
      <td>0.000821</td>
      <td>0.000844</td>
      <td>0.053475</td>
      <td>0.038431</td>
      <td>720</td>
      <td>9</td>
      <td>0.001</td>
      <td>13</td>
      <td>592</td>
      <td>0.007648</td>
      <td>473</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>31Dec2020</td>
      <td>12Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.64</td>
      <td>0.000159</td>
      <td>0.000600</td>
      <td>0.053747</td>
      <td>0.032119</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>15</td>
      <td>832</td>
      <td>0.030014</td>
      <td>2684</td>
      <td>3 min  0 sec</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Accuracy-of-estimation">
<h2>Accuracy of estimation<a class="headerlink" href="#Accuracy-of-estimation" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">estimate_accuracy</span><span class="p">(</span><span class="n">phase</span><span class="o">=</span><span class="s2">&quot;1st&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_20_0.png" src="_images/usage_quick_20_0.png" />
</div>
</div>
</div>
<div class="section" id="Get-parameter-value">
<h2>Get parameter value<a class="headerlink" href="#Get-parameter-value" title="Permalink to this headline">¶</a></h2>
<p>We can get the parameter values of a phase using <code class="docutils literal notranslate"><span class="pre">Scenario.get()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="s2">&quot;4th&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.68
</pre></div></div>
</div>
</div>
<div class="section" id="Show-parameter-history">
<h2>Show parameter history<a class="headerlink" href="#Show-parameter-history" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code> method shows the trajectories of parameters (and the number of cases).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_24_0.png" src="_images/usage_quick_24_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_25_0.png" src="_images/usage_quick_25_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;rho&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_26_0.png" src="_images/usage_quick_26_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;sigma&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_27_0.png" src="_images/usage_quick_27_0.png" />
</div>
</div>
<div class="line-block">
<div class="line">Notes on the history of <span class="math notranslate nohighlight">\(\sigma\)</span> value in japan (last updated: 28Dec2020):</div>
<div class="line">In Japan, we experienced two waves and we are in third wave. In the first wave (Apr - May), recovery period was too long because collapse of the medical care system occurred and no medicines were found.</div>
</div>
<p>Sigma values: the first wave &lt; the second wave &gt; the third wave</p>
<p>However, in the second wave (Jul - Oct), recovery period appears short because we have some effective medicines (not approved, in clinical study), yonger people (people un-associated to sever diseases) were infected.</p>
<p>In the third wave (Nov - ), older people tend to be infected and we are facing with medical collapse at this time…</p>
</div>
<div class="section" id="Show-the-history-of-reproduction-number">
<h2>Show the history of reproduction number<a class="headerlink" href="#Show-the-history-of-reproduction-number" title="Permalink to this headline">¶</a></h2>
<p><span class="math notranslate nohighlight">\(R_0\)</span> (“R naught”) means “the average number of secondary infections caused by an infected host” (<a class="reference external" href="https://towardsdatascience.com/infection-modeling-part-1-87e74645568a">Infection Modeling — Part 1</a>). When this value is larger than 1, the infection disease is outbreaking.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_30_0.png" src="_images/usage_quick_30_0.png" />
</div>
</div>
</div>
<div class="section" id="Simulate-the-number-of-cases">
<h2>Simulate the number of cases<a class="headerlink" href="#Simulate-the-number-of-cases" title="Permalink to this headline">¶</a></h2>
<p>We can compare the actual and simulated (with estimated parameter values) number of confirmed/infected/recovered/fatal cases using <code class="docutils literal notranslate"><span class="pre">Scenario.history()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_32_0.png" src="_images/usage_quick_32_0.png" />
</div>
</div>
</div>
<div class="section" id="Main-scenario">
<h2>Main scenario<a class="headerlink" href="#Main-scenario" title="Permalink to this headline">¶</a></h2>
<p>If the parameter velues will not be changed until 01Apr2021, how many cases will be? We call this scenario as “Main” scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Clear future phases in Main scenario</span>
<span class="n">snl</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Add one future phase 30 days with the parameter set of the last past phase</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="c1"># Add one future phase until 01Apr2021 with the same parameter set</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;01Apr2021&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
<span class="c1"># Simulate the number of cases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_34_0.png" src="_images/usage_quick_34_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Infected</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>417</th>
      <td>2021-03-29</td>
      <td>3600599</td>
      <td>42178</td>
      <td>1321862</td>
      <td>2236559</td>
    </tr>
    <tr>
      <th>418</th>
      <td>2021-03-30</td>
      <td>3741290</td>
      <td>43819</td>
      <td>1374324</td>
      <td>2323147</td>
    </tr>
    <tr>
      <th>419</th>
      <td>2021-03-31</td>
      <td>3887385</td>
      <td>45525</td>
      <td>1428694</td>
      <td>2413166</td>
    </tr>
    <tr>
      <th>420</th>
      <td>2021-04-01</td>
      <td>4039065</td>
      <td>47298</td>
      <td>1485027</td>
      <td>2506740</td>
    </tr>
    <tr>
      <th>421</th>
      <td>2021-04-02</td>
      <td>4196516</td>
      <td>49141</td>
      <td>1543378</td>
      <td>2603997</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Medicine-scenario">
<h2>Medicine scenario<a class="headerlink" href="#Medicine-scenario" title="Permalink to this headline">¶</a></h2>
<p>If <span class="math notranslate nohighlight">\(\sigma\)</span> will be double in 30 days, how many cases will be? We will call this scenario as “Medicine” scenario.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Calcuate the current sigma value of the last phase</span>
<span class="n">sigma_current</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sigma&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
<span class="n">sigma_current</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.03211873068072962
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Sigma value will be double</span>
<span class="n">sigma_new</span> <span class="o">=</span> <span class="n">sigma_current</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">sigma_new</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.06423746136145923
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Initialize &quot;Medicine&quot; scenario (with the same past phases as that of Main scenario)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">)</span>
<span class="c1"># Add 30 days as a new future phases with the same parameter set</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma_current</span><span class="p">)</span>
<span class="c1"># Add a phase until 01Apr2021 with doubled sigma value</span>
<span class="n">snl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;01Apr2021&quot;</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma_new</span><span class="p">)</span>
<span class="n">snl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>1/beta [day]</th>
      <th>alpha1 [-]</th>
      <th>1/gamma [day]</th>
      <th>1/alpha2 [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.64</td>
      <td>0.019314</td>
      <td>0.000191</td>
      <td>0.052288</td>
      <td>0.010854</td>
      <td>720</td>
      <td>9</td>
      <td>0.019</td>
      <td>46</td>
      <td>2618</td>
      <td>0.260938</td>
      <td>2663.0</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.56</td>
      <td>0.071936</td>
      <td>0.000406</td>
      <td>0.016125</td>
      <td>0.026429</td>
      <td>720</td>
      <td>31</td>
      <td>0.072</td>
      <td>18</td>
      <td>1231</td>
      <td>0.389551</td>
      <td>3175.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.85</td>
      <td>0.000391</td>
      <td>0.000074</td>
      <td>0.068940</td>
      <td>0.037153</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>13</td>
      <td>6724</td>
      <td>0.021047</td>
      <td>3177.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000483</td>
      <td>0.000257</td>
      <td>0.047723</td>
      <td>0.044728</td>
      <td>720</td>
      <td>10</td>
      <td>0.000</td>
      <td>11</td>
      <td>1948</td>
      <td>0.039673</td>
      <td>2701.0</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>22Aug2020</td>
      <td>15Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.68</td>
      <td>0.000350</td>
      <td>0.000710</td>
      <td>0.033912</td>
      <td>0.049114</td>
      <td>720</td>
      <td>14</td>
      <td>0.000</td>
      <td>10</td>
      <td>704</td>
      <td>0.052936</td>
      <td>300.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>16Sep2020</td>
      <td>14Oct2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.90</td>
      <td>0.001151</td>
      <td>0.000531</td>
      <td>0.043952</td>
      <td>0.048301</td>
      <td>720</td>
      <td>11</td>
      <td>0.001</td>
      <td>10</td>
      <td>941</td>
      <td>0.027704</td>
      <td>252.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>15Oct2020</td>
      <td>07Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.000070</td>
      <td>0.000570</td>
      <td>0.052594</td>
      <td>0.046326</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>10</td>
      <td>877</td>
      <td>0.033175</td>
      <td>2672.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>08Nov2020</td>
      <td>20Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.59</td>
      <td>0.000468</td>
      <td>0.000551</td>
      <td>0.071139</td>
      <td>0.044182</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>11</td>
      <td>906</td>
      <td>0.012079</td>
      <td>309.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>21Nov2020</td>
      <td>02Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.37</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.053229</td>
      <td>0.038421</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>13</td>
      <td>906</td>
      <td>0.027197</td>
      <td>318.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>03Dec2020</td>
      <td>12Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.15</td>
      <td>0.001707</td>
      <td>0.000689</td>
      <td>0.051601</td>
      <td>0.044288</td>
      <td>720</td>
      <td>9</td>
      <td>0.002</td>
      <td>11</td>
      <td>725</td>
      <td>0.006455</td>
      <td>764.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>13Dec2020</td>
      <td>22Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.001168</td>
      <td>0.000797</td>
      <td>0.048470</td>
      <td>0.042434</td>
      <td>720</td>
      <td>10</td>
      <td>0.001</td>
      <td>11</td>
      <td>627</td>
      <td>0.008264</td>
      <td>279.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>23Dec2020</td>
      <td>30Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.36</td>
      <td>0.000821</td>
      <td>0.000844</td>
      <td>0.053475</td>
      <td>0.038431</td>
      <td>720</td>
      <td>9</td>
      <td>0.001</td>
      <td>13</td>
      <td>592</td>
      <td>0.007648</td>
      <td>473.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>31Dec2020</td>
      <td>12Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.64</td>
      <td>0.000159</td>
      <td>0.000600</td>
      <td>0.053747</td>
      <td>0.032119</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>15</td>
      <td>832</td>
      <td>0.030014</td>
      <td>2684.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>Future</td>
      <td>13Jan2021</td>
      <td>11Feb2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.64</td>
      <td>0.000159</td>
      <td>0.000600</td>
      <td>0.053747</td>
      <td>0.032119</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>15</td>
      <td>832</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>14th</th>
      <td>Future</td>
      <td>12Feb2021</td>
      <td>01Apr2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.83</td>
      <td>0.000159</td>
      <td>0.000600</td>
      <td>0.053747</td>
      <td>0.064237</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>7</td>
      <td>832</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Simulate the number of cases</span>
<span class="n">snl</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Medicine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_39_0.png" src="_images/usage_quick_39_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Confirmed</th>
      <th>Fatal</th>
      <th>Infected</th>
      <th>Recovered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>417</th>
      <td>2021-03-29</td>
      <td>1323443</td>
      <td>15874</td>
      <td>75318</td>
      <td>1232251</td>
    </tr>
    <tr>
      <th>418</th>
      <td>2021-03-30</td>
      <td>1331346</td>
      <td>15964</td>
      <td>73585</td>
      <td>1241797</td>
    </tr>
    <tr>
      <th>419</th>
      <td>2021-03-31</td>
      <td>1339070</td>
      <td>16053</td>
      <td>71890</td>
      <td>1251127</td>
    </tr>
    <tr>
      <th>420</th>
      <td>2021-04-01</td>
      <td>1346618</td>
      <td>16139</td>
      <td>70233</td>
      <td>1260246</td>
    </tr>
    <tr>
      <th>421</th>
      <td>2021-04-02</td>
      <td>1353999</td>
      <td>16224</td>
      <td>68613</td>
      <td>1269162</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Short-term-prediction-of-parameter-values">
<h2>Short-term prediction of parameter values<a class="headerlink" href="#Short-term-prediction-of-parameter-values" title="Permalink to this headline">¶</a></h2>
<p>With OxCGRT data, we can predict the parameter values of the future phases because <a class="reference external" href="https://github.com/OxCGRT/covid-policy-tracker">OxCGRT indicators</a> (policy measures) impact on parameter values with delay (=recovery period).</p>
<p>OxCGRT indicators are</p>
<ul class="simple">
<li><p>school_closing,</p></li>
<li><p>workplace_closing,</p></li>
<li><p>cancel_events,</p></li>
<li><p>gatherings_restrictions,</p></li>
<li><p>transport_closing,</p></li>
<li><p>stay_home_restrictions,</p></li>
<li><p>internal_movement_restrictions,</p></li>
<li><p>international_movement_restrictions,</p></li>
<li><p>information_campaigns,</p></li>
<li><p>testing_policy, and</p></li>
<li><p>contact_tracing.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Fitting with linear regression model (Elastic Net regression)</span>
<span class="n">fit_dict</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">oxcgrt_data</span><span class="o">=</span><span class="n">oxcgrt_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Determination coefficient: </span><span class="si">{</span><span class="n">fit_dict</span><span class="p">[</span><span class="s1">&#39;score_train&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (train)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Determination coefficient: </span><span class="si">{</span><span class="n">fit_dict</span><span class="p">[</span><span class="s1">&#39;score_test&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (test)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Intercept:&quot;</span><span class="p">)</span>
<span class="n">fit_dict</span><span class="p">[</span><span class="s2">&quot;intercept&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Determination coefficient: 0.7088703704963745 (train)
Determination coefficient: 0.6684432296640531 (test)
Intercept:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
#T_84b7d_row0_col0{
            background-color:  #2a88bc;
            color:  #000000;
        }#T_84b7d_row0_col1{
            background-color:  #045b8e;
            color:  #f1f1f1;
        }#T_84b7d_row0_col2{
            background-color:  #c6cce3;
            color:  #000000;
        }#T_84b7d_row0_col3,#T_84b7d_row1_col0,#T_84b7d_row1_col2,#T_84b7d_row1_col3,#T_84b7d_row1_col4,#T_84b7d_row1_col6,#T_84b7d_row1_col7,#T_84b7d_row1_col8,#T_84b7d_row1_col9,#T_84b7d_row2_col3,#T_84b7d_row3_col3{
            background-color:  #65a3cb;
            color:  #000000;
        }#T_84b7d_row0_col4,#T_84b7d_row2_col7{
            background-color:  #6fa7ce;
            color:  #000000;
        }#T_84b7d_row0_col5{
            background-color:  #0570b0;
            color:  #f1f1f1;
        }#T_84b7d_row0_col6{
            background-color:  #5ea0ca;
            color:  #000000;
        }#T_84b7d_row0_col7{
            background-color:  #4c99c5;
            color:  #000000;
        }#T_84b7d_row0_col8,#T_84b7d_row3_col7{
            background-color:  #6da6cd;
            color:  #000000;
        }#T_84b7d_row0_col9{
            background-color:  #fff7fb;
            color:  #000000;
        }#T_84b7d_row0_col10{
            background-color:  #023858;
            color:  #f1f1f1;
        }#T_84b7d_row1_col1,#T_84b7d_row1_col5,#T_84b7d_row1_col10,#T_84b7d_row2_col8{
            background-color:  #63a2cb;
            color:  #000000;
        }#T_84b7d_row2_col0,#T_84b7d_row3_col2{
            background-color:  #7bacd1;
            color:  #000000;
        }#T_84b7d_row2_col1,#T_84b7d_row2_col10{
            background-color:  #c1cae2;
            color:  #000000;
        }#T_84b7d_row2_col2{
            background-color:  #1b7eb7;
            color:  #000000;
        }#T_84b7d_row2_col4{
            background-color:  #589ec8;
            color:  #000000;
        }#T_84b7d_row2_col5{
            background-color:  #a9bfdc;
            color:  #000000;
        }#T_84b7d_row2_col6{
            background-color:  #60a1ca;
            color:  #000000;
        }#T_84b7d_row2_col9{
            background-color:  #0569a4;
            color:  #f1f1f1;
        }#T_84b7d_row3_col0{
            background-color:  #81aed2;
            color:  #000000;
        }#T_84b7d_row3_col1,#T_84b7d_row3_col5{
            background-color:  #328dbf;
            color:  #000000;
        }#T_84b7d_row3_col4{
            background-color:  #80aed2;
            color:  #000000;
        }#T_84b7d_row3_col6{
            background-color:  #79abd0;
            color:  #000000;
        }#T_84b7d_row3_col8{
            background-color:  #5c9fc9;
            color:  #000000;
        }#T_84b7d_row3_col9{
            background-color:  #2383ba;
            color:  #000000;
        }#T_84b7d_row3_col10{
            background-color:  #9ab8d8;
            color:  #000000;
        }</style><table id="T_84b7d_" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >School_closing</th>        <th class="col_heading level0 col1" >Workplace_closing</th>        <th class="col_heading level0 col2" >Cancel_events</th>        <th class="col_heading level0 col3" >Gatherings_restrictions</th>        <th class="col_heading level0 col4" >Transport_closing</th>        <th class="col_heading level0 col5" >Stay_home_restrictions</th>        <th class="col_heading level0 col6" >Internal_movement_restrictions</th>        <th class="col_heading level0 col7" >International_movement_restrictions</th>        <th class="col_heading level0 col8" >Information_campaigns</th>        <th class="col_heading level0 col9" >Testing_policy</th>        <th class="col_heading level0 col10" >Contact_tracing</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_84b7d_level0_row0" class="row_heading level0 row0" >theta</th>
                        <td id="T_84b7d_row0_col0" class="data row0 col0" >0.019279</td>
                        <td id="T_84b7d_row0_col1" class="data row0 col1" >0.052966</td>
                        <td id="T_84b7d_row0_col2" class="data row0 col2" >-0.039283</td>
                        <td id="T_84b7d_row0_col3" class="data row0 col3" >0.000000</td>
                        <td id="T_84b7d_row0_col4" class="data row0 col4" >-0.003032</td>
                        <td id="T_84b7d_row0_col5" class="data row0 col5" >0.034358</td>
                        <td id="T_84b7d_row0_col6" class="data row0 col6" >0.002540</td>
                        <td id="T_84b7d_row0_col7" class="data row0 col7" >0.007969</td>
                        <td id="T_84b7d_row0_col8" class="data row0 col8" >-0.002636</td>
                        <td id="T_84b7d_row0_col9" class="data row0 col9" >-0.083371</td>
                        <td id="T_84b7d_row0_col10" class="data row0 col10" >0.073724</td>
            </tr>
            <tr>
                        <th id="T_84b7d_level0_row1" class="row_heading level0 row1" >kappa</th>
                        <td id="T_84b7d_row1_col0" class="data row1 col0" >-0.000064</td>
                        <td id="T_84b7d_row1_col1" class="data row1 col1" >0.000217</td>
                        <td id="T_84b7d_row1_col2" class="data row1 col2" >-0.000071</td>
                        <td id="T_84b7d_row1_col3" class="data row1 col3" >0.000000</td>
                        <td id="T_84b7d_row1_col4" class="data row1 col4" >-0.000098</td>
                        <td id="T_84b7d_row1_col5" class="data row1 col5" >0.000236</td>
                        <td id="T_84b7d_row1_col6" class="data row1 col6" >-0.000144</td>
                        <td id="T_84b7d_row1_col7" class="data row1 col7" >-0.000079</td>
                        <td id="T_84b7d_row1_col8" class="data row1 col8" >0.000072</td>
                        <td id="T_84b7d_row1_col9" class="data row1 col9" >0.000055</td>
                        <td id="T_84b7d_row1_col10" class="data row1 col10" >0.000311</td>
            </tr>
            <tr>
                        <th id="T_84b7d_level0_row2" class="row_heading level0 row2" >rho</th>
                        <td id="T_84b7d_row2_col0" class="data row2 col0" >-0.007690</td>
                        <td id="T_84b7d_row2_col1" class="data row2 col1" >-0.036823</td>
                        <td id="T_84b7d_row2_col2" class="data row2 col2" >0.025416</td>
                        <td id="T_84b7d_row2_col3" class="data row2 col3" >0.000000</td>
                        <td id="T_84b7d_row2_col4" class="data row2 col4" >0.003863</td>
                        <td id="T_84b7d_row2_col5" class="data row2 col5" >-0.025755</td>
                        <td id="T_84b7d_row2_col6" class="data row2 col6" >0.001364</td>
                        <td id="T_84b7d_row2_col7" class="data row2 col7" >-0.003596</td>
                        <td id="T_84b7d_row2_col8" class="data row2 col8" >0.000428</td>
                        <td id="T_84b7d_row2_col9" class="data row2 col9" >0.040969</td>
                        <td id="T_84b7d_row2_col10" class="data row2 col10" >-0.037244</td>
            </tr>
            <tr>
                        <th id="T_84b7d_level0_row3" class="row_heading level0 row3" >sigma</th>
                        <td id="T_84b7d_row3_col0" class="data row3 col0" >-0.010294</td>
                        <td id="T_84b7d_row3_col1" class="data row3 col1" >0.016382</td>
                        <td id="T_84b7d_row3_col2" class="data row3 col2" >-0.007394</td>
                        <td id="T_84b7d_row3_col3" class="data row3 col3" >0.000000</td>
                        <td id="T_84b7d_row3_col4" class="data row3 col4" >-0.009220</td>
                        <td id="T_84b7d_row3_col5" class="data row3 col5" >0.016079</td>
                        <td id="T_84b7d_row3_col6" class="data row3 col6" >-0.007142</td>
                        <td id="T_84b7d_row3_col7" class="data row3 col7" >-0.002647</td>
                        <td id="T_84b7d_row3_col8" class="data row3 col8" >0.002900</td>
                        <td id="T_84b7d_row3_col9" class="data row3 col9" >0.022472</td>
                        <td id="T_84b7d_row3_col10" class="data row3 col10" >-0.019877</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Short-term prediction</span>
<span class="n">snl</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Forecast&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
      <th>Population</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>tau</th>
      <th>1/beta [day]</th>
      <th>alpha1 [-]</th>
      <th>1/gamma [day]</th>
      <th>1/alpha2 [day]</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0th</th>
      <td>Past</td>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>4.64</td>
      <td>0.019314</td>
      <td>0.000191</td>
      <td>0.052288</td>
      <td>0.010854</td>
      <td>720</td>
      <td>9</td>
      <td>0.019</td>
      <td>46</td>
      <td>2618</td>
      <td>0.260938</td>
      <td>2663.0</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>Past</td>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.56</td>
      <td>0.071936</td>
      <td>0.000406</td>
      <td>0.016125</td>
      <td>0.026429</td>
      <td>720</td>
      <td>31</td>
      <td>0.072</td>
      <td>18</td>
      <td>1231</td>
      <td>0.389551</td>
      <td>3175.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>Past</td>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.85</td>
      <td>0.000391</td>
      <td>0.000074</td>
      <td>0.068940</td>
      <td>0.037153</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>13</td>
      <td>6724</td>
      <td>0.021047</td>
      <td>3177.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>Past</td>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000483</td>
      <td>0.000257</td>
      <td>0.047723</td>
      <td>0.044728</td>
      <td>720</td>
      <td>10</td>
      <td>0.000</td>
      <td>11</td>
      <td>1948</td>
      <td>0.039673</td>
      <td>2701.0</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>Past</td>
      <td>22Aug2020</td>
      <td>15Sep2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.68</td>
      <td>0.000350</td>
      <td>0.000710</td>
      <td>0.033912</td>
      <td>0.049114</td>
      <td>720</td>
      <td>14</td>
      <td>0.000</td>
      <td>10</td>
      <td>704</td>
      <td>0.052936</td>
      <td>300.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>Past</td>
      <td>16Sep2020</td>
      <td>14Oct2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>0.90</td>
      <td>0.001151</td>
      <td>0.000531</td>
      <td>0.043952</td>
      <td>0.048301</td>
      <td>720</td>
      <td>11</td>
      <td>0.001</td>
      <td>10</td>
      <td>941</td>
      <td>0.027704</td>
      <td>252.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>Past</td>
      <td>15Oct2020</td>
      <td>07Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.000070</td>
      <td>0.000570</td>
      <td>0.052594</td>
      <td>0.046326</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>10</td>
      <td>877</td>
      <td>0.033175</td>
      <td>2672.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>Past</td>
      <td>08Nov2020</td>
      <td>20Nov2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.59</td>
      <td>0.000468</td>
      <td>0.000551</td>
      <td>0.071139</td>
      <td>0.044182</td>
      <td>720</td>
      <td>7</td>
      <td>0.000</td>
      <td>11</td>
      <td>906</td>
      <td>0.012079</td>
      <td>309.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>Past</td>
      <td>21Nov2020</td>
      <td>02Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.37</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.053229</td>
      <td>0.038421</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>13</td>
      <td>906</td>
      <td>0.027197</td>
      <td>318.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>Past</td>
      <td>03Dec2020</td>
      <td>12Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.15</td>
      <td>0.001707</td>
      <td>0.000689</td>
      <td>0.051601</td>
      <td>0.044288</td>
      <td>720</td>
      <td>9</td>
      <td>0.002</td>
      <td>11</td>
      <td>725</td>
      <td>0.006455</td>
      <td>764.0</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>Past</td>
      <td>13Dec2020</td>
      <td>22Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.001168</td>
      <td>0.000797</td>
      <td>0.048470</td>
      <td>0.042434</td>
      <td>720</td>
      <td>10</td>
      <td>0.001</td>
      <td>11</td>
      <td>627</td>
      <td>0.008264</td>
      <td>279.0</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>Past</td>
      <td>23Dec2020</td>
      <td>30Dec2020</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.36</td>
      <td>0.000821</td>
      <td>0.000844</td>
      <td>0.053475</td>
      <td>0.038431</td>
      <td>720</td>
      <td>9</td>
      <td>0.001</td>
      <td>13</td>
      <td>592</td>
      <td>0.007648</td>
      <td>473.0</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>Past</td>
      <td>31Dec2020</td>
      <td>12Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.64</td>
      <td>0.000159</td>
      <td>0.000600</td>
      <td>0.053747</td>
      <td>0.032119</td>
      <td>720</td>
      <td>9</td>
      <td>0.000</td>
      <td>15</td>
      <td>832</td>
      <td>0.030014</td>
      <td>2684.0</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>Future</td>
      <td>13Jan2021</td>
      <td>30Jan2021</td>
      <td>126529100</td>
      <td>SIR-F</td>
      <td>1.51</td>
      <td>0.005265</td>
      <td>0.000627</td>
      <td>0.050890</td>
      <td>0.032940</td>
      <td>720</td>
      <td>9</td>
      <td>0.005</td>
      <td>15</td>
      <td>797</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Or, when you do not need &#39;fit_dict&#39;</span>
<span class="c1"># snl.fit_predict(oxcgrt_data=oxcgrt_data, name=&quot;Forecast&quot;).summary(name=&quot;Forecast&quot;)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Compare-the-scenarios">
<h2>Compare the scenarios<a class="headerlink" href="#Compare-the-scenarios" title="Permalink to this headline">¶</a></h2>
<p>We will compare the scenarios with representative values, reproduction number and parameter values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">snl</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>max(Infected)</th>
      <th>argmax(Infected)</th>
      <th>Confirmed on 02Apr2021</th>
      <th>Infected on 02Apr2021</th>
      <th>Fatal on 02Apr2021</th>
      <th>Confirmed on 31Jan2021</th>
      <th>Infected on 31Jan2021</th>
      <th>Fatal on 31Jan2021</th>
      <th>13th_Rt</th>
      <th>14th_Rt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Main</th>
      <td>1543378</td>
      <td>02Apr2021</td>
      <td>4196516.0</td>
      <td>1543378.0</td>
      <td>49141.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.64</td>
      <td>1.64</td>
    </tr>
    <tr>
      <th>Medicine</th>
      <td>212958</td>
      <td>12Feb2021</td>
      <td>1353999.0</td>
      <td>68613.0</td>
      <td>16224.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.64</td>
      <td>0.83</td>
    </tr>
    <tr>
      <th>Forecast</th>
      <td>112189</td>
      <td>31Jan2021</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>449493.0</td>
      <td>112189.0</td>
      <td>6864.0</td>
      <td>1.51</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_46_0.png" src="_images/usage_quick_46_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;Rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_47_0.png" src="_images/usage_quick_47_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;rho&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_48_0.png" src="_images/usage_quick_48_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;sigma&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_49_0.png" src="_images/usage_quick_49_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_50_0.png" src="_images/usage_quick_50_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_51_0.png" src="_images/usage_quick_51_0.png" />
</div>
</div>
</div>
<div class="section" id="Change-rate-of-parameters-in-main-scenario">
<h2>Change rate of parameters in main scenario<a class="headerlink" href="#Change-rate-of-parameters-in-main-scenario" title="Permalink to this headline">¶</a></h2>
<p>History of each parameter will be shown. Values will be divided by the values in 0th phase.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">_</span> <span class="o">=</span> <span class="n">snl</span><span class="o">.</span><span class="n">history_rate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_53_0.png" src="_images/usage_quick_53_0.png" />
</div>
</div>
<div class="section" id="Retrospective-analysis">
<h3>Retrospective analysis<a class="headerlink" href="#Retrospective-analysis" title="Permalink to this headline">¶</a></h3>
<p>We can evaluate the impact of measures using past records. How many people were infected if the parameter values have not changed sinse 01Sep2020?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Perform retrospective analysis</span>
<span class="n">snl_retro</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">jhu_data</span><span class="p">,</span> <span class="n">population_data</span><span class="p">,</span> <span class="s2">&quot;Japan&quot;</span><span class="p">)</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">retrospective</span><span class="p">(</span><span class="s2">&quot;01Sep2020&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="p">,</span> <span class="n">control</span><span class="o">=</span><span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;Retrospective&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         0th phase (20Jul2020 - 05Aug2020): finished 3016 trials in 3 min  0 sec
         6th phase (21Nov2020 - 02Dec2020): finished  298 trials in 0 min 10 sec
         8th phase (06Feb2020 - 16Apr2020): finished 2725 trials in 3 min  0 sec
         9th phase (17Apr2020 - 19Jul2020): finished 2717 trials in 3 min  0 sec
        13th phase (06Aug2020 - 21Aug2020): finished 2751 trials in 3 min  1 sec
         7th phase (08Nov2020 - 20Nov2020): finished  284 trials in 0 min 10 sec
         1st phase (15Oct2020 - 07Nov2020): finished 2758 trials in 3 min  1 sec
         2nd phase (13Dec2020 - 22Dec2020): finished  289 trials in 0 min 10 sec
        12th phase (01Sep2020 - 15Sep2020): finished  306 trials in 0 min 10 sec
         4th phase (03Dec2020 - 12Dec2020): finished  770 trials in 0 min 30 sec
         3rd phase (23Dec2020 - 30Dec2020): finished  552 trials in 0 min 20 sec
        10th phase (16Sep2020 - 14Oct2020): finished  284 trials in 0 min 10 sec
         5th phase (22Aug2020 - 31Aug2020): finished  341 trials in 0 min 10 sec
        11th phase (31Dec2020 - 12Jan2021): finished 3168 trials in 3 min  0 sec
Completed optimization. Total: 9 min 13 sec

&lt;SIR-F model: parameter estimation&gt;
Running optimization with 4 CPUs...
         0th phase (01Sep2020 - 12Jan2021): finished 8904 trials in 3 min  0 sec
Completed optimization. Total: 3 min  0 sec
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the summary of estimation</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Start&quot;</span><span class="p">,</span> <span class="s2">&quot;End&quot;</span><span class="p">,</span> <span class="s2">&quot;ODE&quot;</span><span class="p">,</span> <span class="s2">&quot;Rt&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">cs</span><span class="o">.</span><span class="n">SIRF</span><span class="o">.</span><span class="n">PARAMETERS</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;RMSLE&quot;</span><span class="p">,</span> <span class="s2">&quot;Trials&quot;</span><span class="p">,</span> <span class="s2">&quot;Runtime&quot;</span><span class="p">]</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Start</th>
      <th>End</th>
      <th>ODE</th>
      <th>Rt</th>
      <th>theta</th>
      <th>kappa</th>
      <th>rho</th>
      <th>sigma</th>
      <th>RMSLE</th>
      <th>Trials</th>
      <th>Runtime</th>
    </tr>
    <tr>
      <th>Scenario</th>
      <th>Phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="14" valign="top">Main</th>
      <th>0th</th>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>SIR-F</td>
      <td>4.64</td>
      <td>0.019314</td>
      <td>0.000191</td>
      <td>0.052288</td>
      <td>0.010854</td>
      <td>0.260938</td>
      <td>2725</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>SIR-F</td>
      <td>0.56</td>
      <td>0.071936</td>
      <td>0.000406</td>
      <td>0.016125</td>
      <td>0.026429</td>
      <td>0.389551</td>
      <td>2717</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>SIR-F</td>
      <td>1.85</td>
      <td>0.000391</td>
      <td>0.000074</td>
      <td>0.068940</td>
      <td>0.037153</td>
      <td>0.021047</td>
      <td>3016</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000483</td>
      <td>0.000257</td>
      <td>0.047723</td>
      <td>0.044728</td>
      <td>0.039673</td>
      <td>2751</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>22Aug2020</td>
      <td>31Aug2020</td>
      <td>SIR-F</td>
      <td>0.74</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.035336</td>
      <td>0.046952</td>
      <td>0.015091</td>
      <td>341</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>01Sep2020</td>
      <td>15Sep2020</td>
      <td>SIR-F</td>
      <td>0.72</td>
      <td>0.017929</td>
      <td>0.000005</td>
      <td>0.034704</td>
      <td>0.047506</td>
      <td>0.017697</td>
      <td>306</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>6th</th>
      <td>16Sep2020</td>
      <td>14Oct2020</td>
      <td>SIR-F</td>
      <td>0.90</td>
      <td>0.001151</td>
      <td>0.000531</td>
      <td>0.043952</td>
      <td>0.048301</td>
      <td>0.027704</td>
      <td>284</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>7th</th>
      <td>15Oct2020</td>
      <td>07Nov2020</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.000070</td>
      <td>0.000570</td>
      <td>0.052594</td>
      <td>0.046326</td>
      <td>0.033175</td>
      <td>2758</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>8th</th>
      <td>08Nov2020</td>
      <td>20Nov2020</td>
      <td>SIR-F</td>
      <td>1.59</td>
      <td>0.000468</td>
      <td>0.000551</td>
      <td>0.071139</td>
      <td>0.044182</td>
      <td>0.012079</td>
      <td>284</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>9th</th>
      <td>21Nov2020</td>
      <td>02Dec2020</td>
      <td>SIR-F</td>
      <td>1.37</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.053229</td>
      <td>0.038421</td>
      <td>0.027197</td>
      <td>298</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>10th</th>
      <td>03Dec2020</td>
      <td>12Dec2020</td>
      <td>SIR-F</td>
      <td>1.15</td>
      <td>0.001707</td>
      <td>0.000689</td>
      <td>0.051601</td>
      <td>0.044288</td>
      <td>0.006455</td>
      <td>770</td>
      <td>0 min 30 sec</td>
    </tr>
    <tr>
      <th>11th</th>
      <td>13Dec2020</td>
      <td>22Dec2020</td>
      <td>SIR-F</td>
      <td>1.12</td>
      <td>0.001168</td>
      <td>0.000797</td>
      <td>0.048470</td>
      <td>0.042434</td>
      <td>0.008264</td>
      <td>289</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>12th</th>
      <td>23Dec2020</td>
      <td>30Dec2020</td>
      <td>SIR-F</td>
      <td>1.36</td>
      <td>0.000821</td>
      <td>0.000844</td>
      <td>0.053475</td>
      <td>0.038431</td>
      <td>0.007648</td>
      <td>552</td>
      <td>0 min 20 sec</td>
    </tr>
    <tr>
      <th>13th</th>
      <td>31Dec2020</td>
      <td>12Jan2021</td>
      <td>SIR-F</td>
      <td>1.63</td>
      <td>0.000211</td>
      <td>0.000651</td>
      <td>0.053948</td>
      <td>0.032388</td>
      <td>0.029947</td>
      <td>3168</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">Retrospective</th>
      <th>0th</th>
      <td>06Feb2020</td>
      <td>16Apr2020</td>
      <td>SIR-F</td>
      <td>4.64</td>
      <td>0.019314</td>
      <td>0.000191</td>
      <td>0.052288</td>
      <td>0.010854</td>
      <td>0.260938</td>
      <td>2725</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>1st</th>
      <td>17Apr2020</td>
      <td>19Jul2020</td>
      <td>SIR-F</td>
      <td>0.56</td>
      <td>0.071936</td>
      <td>0.000406</td>
      <td>0.016125</td>
      <td>0.026429</td>
      <td>0.389551</td>
      <td>2717</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>2nd</th>
      <td>20Jul2020</td>
      <td>05Aug2020</td>
      <td>SIR-F</td>
      <td>1.85</td>
      <td>0.000391</td>
      <td>0.000074</td>
      <td>0.068940</td>
      <td>0.037153</td>
      <td>0.021047</td>
      <td>3016</td>
      <td>3 min  0 sec</td>
    </tr>
    <tr>
      <th>3rd</th>
      <td>06Aug2020</td>
      <td>21Aug2020</td>
      <td>SIR-F</td>
      <td>1.06</td>
      <td>0.000483</td>
      <td>0.000257</td>
      <td>0.047723</td>
      <td>0.044728</td>
      <td>0.039673</td>
      <td>2751</td>
      <td>3 min  1 sec</td>
    </tr>
    <tr>
      <th>4th</th>
      <td>22Aug2020</td>
      <td>31Aug2020</td>
      <td>SIR-F</td>
      <td>0.74</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.035336</td>
      <td>0.046952</td>
      <td>0.015091</td>
      <td>341</td>
      <td>0 min 10 sec</td>
    </tr>
    <tr>
      <th>5th</th>
      <td>01Sep2020</td>
      <td>12Jan2021</td>
      <td>SIR-F</td>
      <td>0.74</td>
      <td>0.000472</td>
      <td>0.000552</td>
      <td>0.035336</td>
      <td>0.046952</td>
      <td>1.465791</td>
      <td>8904</td>
      <td>3 min  0 sec</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># History of reproduction number</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl_retro</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_57_0.png" src="_images/usage_quick_57_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># History of Infected</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">snl_retro</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="s2">&quot;Infected&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/usage_quick_58_0.png" src="_images/usage_quick_58_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Show the representative values</span>
<span class="n">snl_retro</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>max(Infected)</th>
      <th>argmax(Infected)</th>
      <th>Confirmed on 13Jan2021</th>
      <th>Infected on 13Jan2021</th>
      <th>Fatal on 13Jan2021</th>
      <th>5th_Rt</th>
      <th>6th_Rt</th>
      <th>7th_Rt</th>
      <th>8th_Rt</th>
      <th>9th_Rt</th>
      <th>10th_Rt</th>
      <th>11th_Rt</th>
      <th>12th_Rt</th>
      <th>13th_Rt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Main</th>
      <td>60842</td>
      <td>13Jan2021</td>
      <td>296098</td>
      <td>60842</td>
      <td>4223</td>
      <td>0.72</td>
      <td>0.9</td>
      <td>1.12</td>
      <td>1.59</td>
      <td>1.37</td>
      <td>1.15</td>
      <td>1.12</td>
      <td>1.36</td>
      <td>1.63</td>
    </tr>
    <tr>
      <th>Retrospective</th>
      <td>13401</td>
      <td>21Aug2020</td>
      <td>94197</td>
      <td>353</td>
      <td>1712</td>
      <td>0.74</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="usage_dataset.html" class="btn btn-neutral float-right" title="Usage: datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="usage_quickest.html" class="btn btn-neutral float-left" title="Usage: quickest tour" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, CovsirPhy Development Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>